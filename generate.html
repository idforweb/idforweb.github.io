<html>
<style>
.button {
    background-color: #8c8c8c; /* Gray */
    border: none;
    color: white;
    padding: 15px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
}
.button2:hover {
  box-shadow: 0 12px 16px 0 rgba(0,0,0,0.24), 0 17px 50px 0 rgba(0,0,0,0.19);
}
</style>
<script src='qrcode.js'></script>
<script>
  function generate_qr_code(name, string, size) {
    document.getElementById(name).innerHTML = '';
    var qrcode = new QRCode(name, {
      text: string,
      width: size,
      height: size,
      colorDark: "#000000",
      colorLight: "#ffffff",
      correctLevel : QRCode.CorrectLevel.H
    });
    return qrcode;
  }
  function play_intro() {
    location.href='https://idforweb.github.io/play.html';
  }

  function create_id() {
    document.getElementById('video_frame').innerHTML =
      '<p align="center"><iframe src="create.html" frameborder=0 border=0 width=80% height=70%></iframe></p>';
  }
  function verify_id() {
  }
  function do_survey() {
    location.href='https://goo.gl/forms/xhxUZ5GhZp';
  }
</script>
<body>
  <div id='menu'>
    <p align='center'>
    <script>
      // get input like
      /*
        1 First name
        2 Last name
        3 Position
        4 Affiliation
           record video button
        5. Canvas with thumbnail
        6. Chosen thumbnail
        7. Generate ID button
      */
    </script>
    First name: <input type=text></input><br />
    Last name: <input type=text></input><br />
    Position: <input type=text></input><br />
    Affiliation: <input type=text></input><br />
    <button class='button button2' id='record' onclick='javascript:do_record();'>Record Selfie Video</button><br /><br />

    <button class='button button2' id='generate' onclick='javascript:do_generate_id();'>Generate ID</button><br /><br />
    </p>
  </div>
  <div id='video_frame' frameborder=0 border=0></div>
  <div id="qrcode_1"></div>
  <div id="qrcode_2"></div>
  <video id="thumb" controls preload="metadata" width="720px" height="540px">
    <source src="video.mp4"
    type='video/mp4'>
    <!--<source src="102614-video-sample-webmhd.webm"
    type='video/webm;codecs="vp8, vorbis"'>-->
  </video>
  <canvas id="canvas"
    width="750px" height="540px"
    style="display:block;">
  </canvas>
  <div id="screenShots"></div>
  <script>
     var video = document.getElementById("thumb");
     video.addEventListener("loadedmetadata", initScreenshot);
     video.addEventListener("playing", startScreenshot);
     video.addEventListener("pause", stopScreenshot);
     video.addEventListener("ended", stopScreenshot);
     var canvas = document.getElementById("canvas");
     var ctx = canvas.getContext("2d");
     var ssContainer = document.getElementById("screenShots");
     var videoHeight, videoWidth;
     var drawTimer = null;

     function initScreenshot() {
       videoHeight = video.videoHeight;
       videoWidth = video.videoWidth;
       canvas.width = videoWidth;
       canvas.height = videoHeight;
     }

     function startScreenshot() {
       if (drawTimer == null) {
         drawTimer = setInterval(grabScreenshot, 1000);
       }
     }

     function stopScreenshot() {
       if (drawTimer) {
         clearInterval(drawTimer);
         drawTimer = null;
       }
     }

     function grabScreenshot() {
       ctx.drawImage(video, 0, 0, videoWidth, videoHeight);
       var img = new Image();
       img.src = canvas.toDataURL("image/png");
       img.width = 120;
       ssContainer.appendChild(img);
     }
  </script>
</body>
</html>

